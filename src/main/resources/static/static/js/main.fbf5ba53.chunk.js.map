{"version":3,"sources":["utils/validateEmail.js","services/authService.js","providers/authProvider.js","StyledApp.js","components/PrivateRoute/index.js","containers/Broadcast/style.js","components/TextField/style.js","components/TextField/index.js","components/Button/index.js","services/chatService.js","providers/chatProvider.js","containers/Broadcast/index.js","containers/Login/style.js","components/Input/style.js","components/Input/index.js","containers/Login/index.js","containers/Register/style.js","containers/Register/index.js","App.js","reportWebVitals.js","index.js"],"names":["validateEmail","email","test","String","toLowerCase","AuthService","_url","process","REACT_APP_API_URL","_validateStringField","field","value","trim","length","Error","toUpperCase","_validateEmail","setUsername","username","sessionStorage","setItem","getUsername","getItem","setToken","token","getToken","isLoggedIn","this","register","password","studentId","firstName","lastName","Promise","resolve","then","fetch","method","body","JSON","stringify","headers","res","status","json","message","login","data","jwt","logout","clear","retrieveUser","authorization","userData","AuthState","createContext","AuthDispatch","EVENT_TYPES","EVENTS","state","event","payload","name","error","INITIAL_STATE","undefined","AuthReducer","type","AuthProvider","children","useReducer","dispatch","handleLogin","catch","events","onUpdate","target","onRegister","onLogin","onLogout","onLoadUserData","onClearErrors","Provider","useAuthState","context","useContext","useAuthDispatch","StyledApp","styled","div","PrivateRoute","redirectTo","rest","render","to","StyledBroadcast","CustomLi","li","props","newGrouping","isMe","ChatBox","MainBox","MainHeader","h1","FormGroup","form","MainBody","StyledTextField","textarea","TextField","ButtonStyle","button","Button","ChatService","loadChat","room","historyChat","ChatState","ChatDispatch","chatHistory","isChatLoaded","ChatReducer","ChatProvider","onLoadChat","onMessageReceive","msg","SOCKET_URL","window","location","origin","Broadcast","client","useRef","useState","clientMsg","setClientMsg","useChatState","useChatDispatch","useEffect","from","getFullName","onSubmit","e","preventDefault","current","sendMessage","content","dateTime","Date","getTime","toString","Authorization","url","topics","onConnect","toast","info","position","autoClose","hideProgressBar","onMessage","onConnectFailure","err","console","log","debug","ref","autoReconnect","style","flex","onClick","map","index","arr","moment","parseInt","textAlign","fontSize","fromNow","cols","rows","placeholder","onChange","onKeyPress","which","charCode","shiftKey","StyledLogin","ErrorMessage","InputStyle","input","invalid","InvalidMessage","span","Input","invalidMsg","innerRef","defaultProps","Login","invalidForm","autoComplete","required","StyledRegister","Register","firstNameRef","lastNameRef","confirmPasswordRef","studentIdRef","marginBottom","App","history","useHistory","unlisten","listen","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.fbf5ba53.chunk.js","sourcesContent":["const validateEmail = email => {\r\n  const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n\r\n  return regex.test(String(email).toLowerCase())\r\n}\r\n\r\nexport default validateEmail","import validateEmail from '../utils/validateEmail'\r\n\r\nconst AuthService = {\r\n  _url: process.env.REACT_APP_API_URL || '',\r\n\r\n  _validateStringField(field, value) {\r\n    if (typeof value !== 'string' || !value.trim().length)\r\n      throw Error(`${field[0].toUpperCase()} is not valid`)\r\n  },\r\n\r\n  _validateEmail(email) {\r\n    if (!validateEmail(email)) throw Error(`${email} is not a valid email`)\r\n  },\r\n\r\n  setUsername(username) {\r\n    if (username) {\r\n      sessionStorage.setItem('username', username)\r\n    }\r\n  },\r\n\r\n  getUsername() {\r\n    return sessionStorage.getItem('username')\r\n  },\r\n\r\n  setToken(token) {\r\n    if (token) {\r\n      sessionStorage.setItem('token', token)\r\n    }\r\n  },\r\n\r\n  getToken() {\r\n    return sessionStorage.getItem('token')\r\n  },\r\n\r\n  isLoggedIn() {\r\n    const res = !!(this.getUsername() && this.getToken())\r\n\r\n    return res\r\n  },\r\n\r\n  register(username, email, password, studentId, firstName, lastName) {\r\n    return Promise.resolve().then(() => {\r\n      this._validateStringField('username', username)\r\n      this._validateEmail(email)\r\n      this._validateStringField('password', password)\r\n      this._validateStringField('studentId', studentId)\r\n      this._validateStringField('firstName', firstName)\r\n      this._validateStringField('lastName', lastName)\r\n\r\n      return fetch(`${this._url}/register`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({ username, email, password, studentId, firstName, lastName }),\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res.status === 201) {\r\n            return res\r\n          }\r\n\r\n          return res.json().then(({ message }) => {\r\n            throw Error(message)\r\n          })\r\n        })\r\n        .then(res => res.json())\r\n        .then(() => true)\r\n    })\r\n  },\r\n\r\n  login(username, password) {\r\n    return Promise.resolve().then(() => {\r\n      this._validateStringField('username', username)\r\n      this._validateStringField('password', password)\r\n\r\n      return fetch(`${this._url}/authenticate`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({ username, password }),\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(res => {\r\n          if (res.status === 200) {\r\n            return res\r\n          }\r\n\r\n          return res.json().then(({ message }) => {\r\n            throw Error(message)\r\n          })\r\n        })\r\n        .then(res => res.json())\r\n        .then((data) => {\r\n          this.setToken(data.jwt)\r\n          this.setUsername(data.username)\r\n\r\n          return true\r\n        })\r\n    })\r\n  },\r\n\r\n  logout() {\r\n    return Promise.resolve().then(() => {\r\n      sessionStorage.clear()\r\n\r\n      return true\r\n    })\r\n  },\r\n\r\n  retrieveUser() {\r\n    return fetch(`${this._url}/user/${this.getUsername()}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'content-type': 'application/json',\r\n        authorization: `Bearer ${this.getToken()}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.status === 200) {\r\n        return res\r\n      }\r\n\r\n      return res.json().then(({ message }) => {\r\n        throw Error(message)\r\n      })\r\n    })\r\n    .then(res => res.json())\r\n    .then(userData => userData)\r\n  }\r\n}\r\n\r\nexport default AuthService","import React, { createContext, useContext, useReducer } from 'react'\r\nimport AuthService from '../services/authService'\r\n\r\nconst AuthState = createContext()\r\nconst AuthDispatch = createContext()\r\n\r\nconst EVENT_TYPES = {\r\n  UPDATE: 'update',\r\n  LOGIN_SUCCESS: 'login_success',\r\n  LOGIN_ERROR: 'login_error',\r\n  LOGOUT: 'logout',\r\n  USER_LOADED: 'user_loaded',\r\n  USER_LOAD_FAILED: 'user_load_failed',\r\n  CLEAR_ERRORS: 'clear_errors',\r\n  ERROR: 'error'\r\n}\r\n\r\nconst EVENTS = {\r\n  [EVENT_TYPES.UPDATE]: (state, event) => {\r\n    const { name, value } = event.payload\r\n\r\n    return {\r\n      ...state,\r\n      [name]: value\r\n    }\r\n  },\r\n  [EVENT_TYPES.LOGIN_SUCCESS]: state => {\r\n    return {\r\n      ...state,\r\n      isLoggedIn: true\r\n    }\r\n  },\r\n  [EVENT_TYPES.USER_LOADED]: (state, event) => {\r\n    return {\r\n      ...state,\r\n      userData: event.payload.userData\r\n    }\r\n  },\r\n  [EVENT_TYPES.LOGIN_ERROR]: (state, event) => {\r\n    const { error } = event.payload\r\n    return {\r\n      ...state,\r\n      isLoggedIn: false,\r\n      error\r\n    }\r\n  },\r\n  [EVENT_TYPES.LOGOUT]: () => {\r\n    return {\r\n      name: '',\r\n      password: '',\r\n      error: '',\r\n      isLoggedIn: false\r\n    }\r\n  },\r\n  [EVENT_TYPES.ERROR]: (state, event) => {\r\n    const { error } = event.payload\r\n    return {\r\n        ...state,\r\n        error\r\n    }\r\n  },\r\n  [EVENT_TYPES.USER_LOAD_FAILED]: (state, event) => {\r\n    const { error } = event.payload\r\n    return {\r\n        ...state,\r\n        error\r\n    }\r\n  },\r\n  [EVENT_TYPES.CLEAR_ERRORS]: state => {\r\n    return {\r\n        ...state,\r\n        error: ''\r\n    }\r\n  }\r\n}\r\n\r\nconst INITIAL_STATE = {\r\n  isLoggedIn: AuthService.isLoggedIn(),\r\n  token: AuthService.getToken(),\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  userData: undefined,\r\n  error: ''\r\n}\r\n\r\nconst AuthReducer = (state, event) => {\r\n  return EVENTS[event.type](state, event) || state\r\n}\r\n\r\nconst AuthProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE)\r\n\r\n    const handleUpdate = event => {\r\n      const name = event.target.name\r\n      const value = event.target.value\r\n\r\n      dispatch({ type: EVENT_TYPES.UPDATE, payload: { name, value } })\r\n    }\r\n\r\n    const handleRegister = (studentId, firstName, lastName) => {\r\n      const { username, email, password } = state\r\n\r\n      AuthService.register(username, email, password, studentId, firstName, lastName)\r\n        .then(() => handleLogin())\r\n        .catch(({ message }) => {\r\n          dispatch({\r\n            type: EVENT_TYPES.ERROR,\r\n            payload: { error: message }\r\n          })\r\n        })\r\n    }\r\n\r\n    const handleLogin = () => {\r\n      const { username, password } = state\r\n      AuthService.login(username, password)\r\n        .then(() => {\r\n          dispatch({ type: EVENT_TYPES.LOGIN_SUCCESS })\r\n        })\r\n        .catch(({ message }) => {\r\n          dispatch({\r\n            type: EVENT_TYPES.LOGIN_ERROR,\r\n            payload: { error: message }\r\n          })\r\n        })\r\n    }\r\n\r\n    const handleLogout = () => {\r\n      AuthService.logout().then(() => {\r\n        dispatch({ type: EVENT_TYPES.LOGOUT })\r\n      })\r\n    }\r\n\r\n    const handleClearErrors = () => {\r\n      dispatch({ type: EVENT_TYPES.CLEAR_ERRORS })\r\n    }\r\n\r\n    const handleUserDataLoading = () => {\r\n      AuthService.retrieveUser().then(userData => {\r\n        dispatch({ \r\n          type: EVENT_TYPES.USER_LOADED,\r\n          payload: { userData }\r\n        })\r\n      }).catch(({ message }) => {\r\n        dispatch({ \r\n          type: EVENT_TYPES.USER_LOAD_FAILED,\r\n          payload: { error: message }\r\n         })\r\n      })\r\n    }\r\n\r\n    const events = {\r\n      onUpdate: handleUpdate,\r\n      onRegister: handleRegister,\r\n      onLogin: handleLogin,\r\n      onLogout: handleLogout,\r\n      onLoadUserData: handleUserDataLoading,\r\n      onClearErrors: handleClearErrors\r\n    }\r\n\r\n    return (\r\n      <AuthState.Provider value={state}>\r\n        <AuthDispatch.Provider value={events}>\r\n          {children}\r\n        </AuthDispatch.Provider>\r\n      </AuthState.Provider>\r\n    )\r\n}\r\n\r\nconst useAuthState = () => {\r\n  const context = useContext(AuthState)\r\n\r\n  if (context === undefined) {\r\n    throw new Error('useAuthState must be used within a AuthProvider')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst useAuthDispatch = () => {\r\n  const context = useContext(AuthDispatch)\r\n\r\n  if (context === undefined) {\r\n    throw new Error('useAuthDispatch must be used within a AuthProvider')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nexport { AuthProvider, useAuthState, useAuthDispatch }","import styled from 'styled-components'\r\n\r\nexport const StyledApp = styled.div`\r\n  width: 100vw;\r\n  height: 100vh;\r\n`","\r\nimport React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useAuthState } from '../../providers/authProvider'\r\n\r\nconst PrivateRoute = ({ children, redirectTo, ...rest }) => {\r\n  const { isLoggedIn } = useAuthState()\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>\r\n        isLoggedIn ? children : <Redirect to={redirectTo} />\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default PrivateRoute","import styled from 'styled-components'\r\n\r\nexport const StyledBroadcast = styled.div`\r\n  position: relative;\r\n  text-align: left;\r\n  height: 100%;\r\n  background: rgb(220, 220, 220);\r\n  opacity: 0.8;\r\n\r\n  ul {\r\n    list-style: none;\r\n    padding: 24px;\r\n    margin: 0;\r\n    border: 1px solid rgb(180, 180, 180);\r\n    background: rgba(80, 160, 240, 0.1);\r\n    height: 100%;\r\n    overflow-y: scroll;\r\n    width: 50vw;\r\n    height: 50vh;\r\n    display: flex;\r\n    flex-direction: column-reverse;\r\n    align-items: center;\r\n  }\r\n\r\n  p {\r\n    font-size: 22px;\r\n    padding: 5px 0;\r\n  }\r\n\r\n  h1 {\r\n    font-weight: 300;\r\n  }\r\n`\r\n\r\nexport const CustomLi = styled.li`\r\n  height: auto;\r\n  min-width: 60%;\r\n  max-width: 90%;\r\n  padding-top: ${props => props.newGrouping ? '2em' : '.5em'};\r\n  text-align: ${ props => props.isMe ? 'right' : 'left' };\r\n  align-self: ${props => props.isMe ? 'flex-end' : 'flex-start'};\r\n`\r\n\r\nexport const ChatBox = styled.div`\r\n  padding: 1em;\r\n  border-radius: 10px;\r\n  background: ${ props => props.isMe ? 'var(--primary-color)': 'rgba(200, 200, 200)' };\r\n  color: ${ props => props.isMe ? 'white' : '' };\r\n  text-align: ${ props => props.isMe ? 'right' : 'left' };\r\n`\r\n\r\nexport const MainBox = styled.div`\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  box-shadow: 0px 4px 8px 0px rgba(122,122,122,1);\r\n`\r\n\r\nexport const MainHeader = styled.h1`\r\n  display: flex;\r\n  align-items: center;\r\n  background: var(--primary-color);\r\n  color: white;\r\n  padding: 1em;\r\n\r\n  button {\r\n    background: darkred;\r\n    font-size: 16px;\r\n  }\r\n\r\n  button:hover {\r\n    background: rgb(180, 0, 0);\r\n  }\r\n`\r\n\r\nexport const FormGroup = styled.form`\r\n  display: flex;\r\n  margin: 1em 0;\r\n`\r\n\r\nexport const MainBody = styled.div`\r\n  background: white;\r\n  padding: 2em;\r\n  border-radius: 5px;\r\n\r\n  textarea {\r\n    flex: 4;\r\n    border: 1px solid rgb(180, 180, 180);\r\n    width: 100%;\r\n    resize: none;\r\n    font-size: 16px;\r\n    padding: 10px;\r\n  }\r\n\r\n  button {\r\n    flex: 1;\r\n    margin: 0;\r\n  }\r\n\r\n  textarea:focus {\r\n    outline: none;\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const StyledTextField = styled.textarea`\r\n  \r\n`","import { Fragment } from 'react'\r\nimport { StyledTextField } from './style'\r\n\r\nconst TextField = ({...props}) => {\r\n  return (\r\n    <Fragment>\r\n      <StyledTextField {...props}></StyledTextField>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default TextField\r\n","import styled from 'styled-components'\r\n\r\nconst ButtonStyle = styled.button`\r\n\tpadding: 10px 20px;\r\n\tfont-size: 1em;\r\n\tmargin: 10px 0;\r\n\twidth: 100%;\r\n\toutline: none;\r\n\tborder: none;\r\n\tbackground-color: var(--primary-color);\r\n\tcolor: white;\r\n\ttransition: all .3s ease-out;\r\n\r\n\t:hover {\r\n\t\tbackground-color: var(--primary-color-hover);\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t:active {\r\n\t\tbackground-color: var(--primary-color);\r\n\t}\r\n`\r\nconst Button = (props) => {\r\n  return (\r\n\t\t<ButtonStyle {...props}>{ props.children }</ButtonStyle>\r\n\t)\r\n}\r\n\r\nButton.propTypes = {\r\n\t\r\n}\r\n\r\nexport default Button","const ChatService = {\r\n  _url: process.env.REACT_APP_API_URL,\r\n  loadChat(room, token) {\r\n    \r\n    return fetch(`${this._url}/history/${room}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'content-type': 'application/json',\r\n        authorization: `Bearer ${ token }`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.status === 200) {\r\n        return res\r\n      }\r\n\r\n      return res.json().then(({ message }) => {\r\n        throw Error(message)\r\n      })\r\n    })\r\n    .then(res => res.json())\r\n    .then(historyChat => historyChat)\r\n  }\r\n}\r\n\r\nexport default ChatService","import { createContext, useContext, useReducer } from 'react'\r\nimport ChatService from '../services/chatService'\r\n\r\nconst ChatState = createContext()\r\nconst ChatDispatch = createContext()\r\n\r\nconst EVENT_TYPES = {\r\n  CHAT_LOADED: 'chat_loaded',\r\n  CHAT_LOAD_FAILED: 'chat_load_failed',\r\n  MESSAGE_RECEIVED: 'message_received'\r\n}\r\n\r\nconst INITIAL_STATE = {\r\n  chatHistory: [],\r\n  isChatLoaded: false\r\n}\r\n\r\nconst EVENTS = {\r\n\r\n  [EVENT_TYPES.CHAT_LOADED]: (state, event) => {\r\n    return {\r\n      ...state,\r\n      chatHistory: event.payload.chatHistory,\r\n      isChatLoaded: true\r\n    }\r\n  },\r\n  [EVENT_TYPES.CHAT_LOAD_FAILED]: (state, event) => {\r\n    const { error } = event.payload\r\n    return {\r\n      ...state,\r\n      error\r\n    }\r\n  },\r\n  [EVENT_TYPES.MESSAGE_RECEIVED]: (state, event) => {\r\n    return {\r\n      ...state,\r\n      chatHistory: [event.payload, ...state.chatHistory]\r\n    }\r\n  }\r\n}\r\n\r\nconst ChatReducer = (state, event) => {\r\n  return EVENTS[event.type](state, event) || state\r\n}\r\n\r\nconst ChatProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(ChatReducer, INITIAL_STATE)\r\n\r\n  const handleChatLoading = event => {\r\n    ChatService.loadChat('main', sessionStorage.getItem('token')).then(chatHistory => {\r\n      dispatch({ \r\n        type: EVENT_TYPES.CHAT_LOADED,\r\n        payload: { chatHistory }\r\n       })\r\n    }).catch(({ message }) => {\r\n      dispatch({\r\n        type: EVENT_TYPES.CHAT_LOAD_FAILED,\r\n        payload: { error: message }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleMessageReceiving = msg => {\r\n    dispatch({\r\n      type: EVENT_TYPES.MESSAGE_RECEIVED,\r\n      payload: msg\r\n    })\r\n  }\r\n\r\n  const events = {\r\n    onLoadChat: handleChatLoading,\r\n    onMessageReceive: handleMessageReceiving\r\n  }\r\n\r\n  return (\r\n    <ChatState.Provider value={state}>\r\n      <ChatDispatch.Provider value={events}>\r\n        {children}\r\n      </ChatDispatch.Provider>\r\n    </ChatState.Provider>\r\n  )\r\n}\r\n\r\nconst useChatState = () => {\r\n  const context = useContext(ChatState)\r\n\r\n  if (context === undefined) {\r\n    throw new Error('useChatState must be used within a ChatProvider')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst useChatDispatch = () => {\r\n  const context = useContext(ChatDispatch)\r\n\r\n  if (context === undefined) {\r\n    throw new Error('useChatDispatch must be used within a ChatProvider')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nexport { ChatProvider, useChatState, useChatDispatch }\r\n","import React, { useState, useRef, useEffect, Fragment} from 'react'\r\nimport SockJsClient from 'react-stomp'\r\nimport { toast } from 'react-toastify'\r\nimport moment from 'moment'\r\n\r\nimport { useAuthDispatch, useAuthState  } from '../../providers/authProvider'\r\nimport { StyledBroadcast, MainBody, MainBox, MainHeader, FormGroup, CustomLi, ChatBox } from './style'\r\nimport TextField from '../../components/TextField'\r\nimport Button from '../../components/Button'\r\nimport { useChatDispatch, useChatState } from '../../providers/chatProvider'\r\n\r\nconst SOCKET_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:8080/ws' : `${window.location.origin}/ws`\r\nconst TOPIC_PATH = '/topic/message/main'\r\n\r\nconst Broadcast = () => {\r\n  const client = useRef()\r\n  const [clientMsg, setClientMsg] = useState('')\r\n  const { chatHistory, isChatLoaded } = useChatState()\r\n  const { onLoadChat, onMessageReceive } = useChatDispatch()\r\n  const { onLogout } = useAuthDispatch()\r\n  const { userData, token } = useAuthState()\r\n\r\n  useEffect(() => {\r\n    if (!isChatLoaded) {\r\n      onLoadChat()\r\n    }\r\n  }, [onLoadChat, isChatLoaded, token])\r\n\r\n  const isMe = (msg) => (msg.from.username === userData.username)\r\n  const getFullName = (data) => (data ? data.firstName + ' ' + data.lastName : '')\r\n\r\n  const onConnected = () => {\r\n    toast.info('You are now connected to chat session.', {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: true,\r\n    })\r\n  }\r\n\r\n  const onConnectFailure = (err) => {\r\n    console.log('Cannot connect to server. please try to reconnect again.')\r\n    throw err\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const message = e.target.value\r\n    setClientMsg(message)\r\n  }\r\n\r\n  const handleKeyPress = (e) => {\r\n    if ((e.which === 13 || e.charCode === 13) && !e.shiftKey) {\r\n      onSubmit(e);      \r\n    }\r\n  }\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault()\r\n    if (clientMsg.trim() === '') return\r\n    client.current.sendMessage('/app/message/main', JSON.stringify({\r\n      from: userData,\r\n      to: 'main',\r\n      content: clientMsg,\r\n      dateTime: new Date().getTime().toString()\r\n    }))\r\n    setClientMsg('')\r\n  }\r\n\r\n  return !userData ? <Fragment/> : (\r\n    <StyledBroadcast>\r\n      <SockJsClient\r\n        headers={{ Authorization: `Bearer ${sessionStorage.getItem('token')}` }}\r\n        url={ SOCKET_URL }\r\n        topics={[ TOPIC_PATH ]}\r\n        onConnect={ onConnected }\r\n        onMessage={ msg => onMessageReceive(msg) }\r\n        onConnectFailure={ onConnectFailure }\r\n        debug={ true }\r\n        ref={ client }\r\n        autoReconnect = { true }\r\n      />\r\n      <MainBox>\r\n        <MainHeader>\r\n          <div style={{ flex: '10' }}>SIT CHAT - { getFullName(userData) }</div>\r\n          <Button style={{ flex: '1' }} onClick={ onLogout }>Logout</Button>\r\n        </MainHeader>\r\n        <MainBody>\r\n          <ul>\r\n            { chatHistory.map((msg, index, arr) => (\r\n              <CustomLi key={ msg.dateTime } isMe={ isMe(msg) } newGrouping={ index + 1 < arr.length && (moment(parseInt(msg.dateTime)) - moment(parseInt(arr[index + 1].dateTime))) > 1000 * 10 } >\r\n                <ChatBox isMe={ isMe(msg)} >\r\n                  { !isMe(msg) ? <h4>({ msg.from.studentId }) { getFullName(msg.from) }:</h4> : '' }\r\n                  <p>{ msg.content }</p>\r\n                  <p style={{ textAlign: (isMe(msg) ? 'left' : 'right'), fontSize: '14px' }}>{ moment(parseInt(msg.dateTime)).fromNow() }</p>\r\n                </ChatBox>\r\n              </CustomLi>\r\n            )) }\r\n          </ul>\r\n          <FormGroup onSubmit={ onSubmit }>\r\n            <TextField cols='60' rows='5' placeholder='Enter your message' onChange={ handleChange } value={ clientMsg } onKeyPress={ handleKeyPress }></TextField>\r\n            <Button type='submit'>Send</Button>\r\n          </FormGroup>\r\n        </MainBody>\r\n      </MainBox>\r\n    </StyledBroadcast>\r\n  )\r\n}\r\n\r\nexport default Broadcast","import styled  from 'styled-components'\r\n\r\nexport const StyledLogin = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  height: 100%;\r\n  background: rgb(220, 220, 220);\r\n\r\n  a {\r\n    text-decoration: none;\r\n    color: var(--primary-color);\r\n    transition: all .3s ease-out;\r\n  }\r\n\r\n  a:hover {\r\n    color: var(--primary-color-hover);\r\n    transform: scale(1.01);\r\n  }\r\n\r\n  h1 {\r\n    font-weight: 300;\r\n    padding: 1em 0;\r\n  }\r\n`\r\n\r\nexport const MainBody = styled.div`\r\n  max-width: 1020px;\r\n  background: white;\r\n  padding: 2em;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 4px 8px 0px rgba(122,122,122,1);\r\n`\r\n\r\nexport const FormGroup = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nexport const ErrorMessage = styled.div`\r\n  font-weight: 500;\r\n  color: red;\r\n  margin: 10px 0;\r\n`","import styled from 'styled-components'\r\n\r\nexport const InputStyle = styled.input`\r\n\tdisplay: block;\r\n\tpadding: 0.5em 1em;\r\n\tmargin: 5px 0;\r\n\twidth: 300px;\r\n\theight: 40px;\r\n\tborder: 1px solid rgba(0, 0, 0, 0.2);\r\n\tborder-bottom: 2px solid ${({ invalid }) => invalid ? 'red' : 'rgba(0, 0, 0, 0.2)' };\r\n\ttransition: all .3s ease-out;\r\n\tfont-size: 1em;\r\n\r\n\t:focus {\r\n\t\toutline: none;\r\n\t\tborder-bottom-color: ${({ invalid }) => invalid ? 'red' : 'var(--primary-color)' };\r\n\t\tbox-shadow: var(--inner-shadow);\r\n\t}\r\n`\r\n\r\nexport const InvalidMessage = styled.span`\r\n\ttext-align: left;\r\n\tcolor: red;\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n`","import { Fragment  } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { InputStyle, InvalidMessage } from './style.js'\r\n\r\nconst Input = ({invalidMsg, ...props}) => {\r\n  return (\r\n\t\t<Fragment>\r\n\t\t\t<InputStyle {...props} ref={props.innerRef} invalid={ invalidMsg !== '' }/>\r\n\t\t\t<InvalidMessage>\r\n\t\t\t\t{ invalidMsg }\r\n\t\t\t</InvalidMessage>\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n\r\nInput.defaultProps = {\r\n\tinvalidMsg: ''\r\n}\r\n\r\nInput.propTypes = {\r\n\tinvalidMsg: PropTypes.string\r\n}\r\n\r\nexport default Input\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { StyledLogin, FormGroup, MainBody, ErrorMessage } from './style.js'\r\nimport Input  from '../../components/Input'\r\nimport Button from '../../components/Button'\r\n\r\nimport { useAuthState, useAuthDispatch } from '../../providers/authProvider'\r\n\r\nconst Login = () => {\r\n  const { onUpdate, onLogin } = useAuthDispatch()\r\n  const { username, password, error } = useAuthState()\r\n  const invalidForm = (error ? error : '' )\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault()\r\n    onLogin()\r\n  }\r\n\r\n  return (\r\n    <StyledLogin>\r\n      <MainBody>\r\n        <h1>SIT CHAT</h1>\r\n        <ErrorMessage>{ invalidForm }</ErrorMessage>\r\n        <FormGroup onSubmit={ onSubmit } autoComplete='off'>\r\n          <div>\r\n            <Input name='username' value={ username || '' }type='text' placeholder='Username' onChange={ onUpdate } required/>\r\n            <Input name='password' value={ password || '' }type='password' placeholder='Password' onChange={ onUpdate } required/>\r\n          </div>\r\n          <Button type='submit'>Login</Button>\r\n          <Link to='/register'>I don't have an account yet.</Link>\r\n        </FormGroup>\r\n      </MainBody>\r\n    </StyledLogin>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import styled from 'styled-components'\r\n\r\nexport const StyledRegister = styled.div`\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;\r\ntext-align: center;\r\nheight: 100%;\r\nbackground: rgb(220, 220, 220);\r\n\r\na {\r\n  text-decoration: none;\r\n  color: var(--primary-color);\r\n  transition: all .3s ease-out;\r\n}\r\n\r\na:hover {\r\n  color: var(--primary-color-hover);\r\n  transform: scale(1.01);\r\n}\r\n\r\nh1 {\r\n  font-weight: 300;\r\n  padding: 1em 0;\r\n}\r\n`\r\n\r\nexport const MainBody = styled.div`\r\n  max-width: 1020px;\r\n  background: white;\r\n  padding: 2em;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 4px 8px 0px rgba(122,122,122,1);\r\n`\r\n\r\nexport const FormGroup = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`","import React, { useRef } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { StyledRegister, FormGroup, MainBody } from './style.js'\r\nimport Input  from '../../components/Input'\r\nimport Button from '../../components/Button'\r\n\r\nimport { useAuthState, useAuthDispatch } from '../../providers/authProvider'\r\n\r\nconst Register = () => {\r\n  const { onUpdate, onRegister } = useAuthDispatch()\r\n  const { username, password, email } = useAuthState()\r\n  const firstNameRef = useRef()\r\n  const lastNameRef = useRef()\r\n  const confirmPasswordRef = useRef()\r\n  const studentIdRef = useRef()\r\n\r\n  const onSubmit = function(e) {\r\n    e.preventDefault()\r\n    if (confirmPasswordRef.current.value !== password) return\r\n    onRegister(studentIdRef.current.value, firstNameRef.current.value, lastNameRef.current.value)\r\n  }\r\n\r\n  return (\r\n    <StyledRegister>\r\n      <MainBody>\r\n        <h1>REGISTER</h1>\r\n        <FormGroup onSubmit={ onSubmit }>\r\n          <div style={{marginBottom: \"8px\"}}>\r\n            <Input name='username' value={ username || '' } type='text' placeholder='Username' onChange={ onUpdate } required/>\r\n            <Input name='password' value={ password || ''} type='password' placeholder='Password' onChange={ onUpdate } required/>\r\n            <Input name='confirmPassword' innerRef={confirmPasswordRef} type='password' placeholder='Confirm Password' required/>\r\n          </div>\r\n          <div>\r\n            <Input name='firstName' innerRef={firstNameRef} type='text' placeholder='First Name' required/>\r\n            <Input name='lastName' innerRef={lastNameRef} type='text' placeholder='Last Name' required/>\r\n            <Input name='studentId' innerRef={studentIdRef} type='number' placeholder='Student ID' required/>\r\n            <Input name='email' value={ email || '' } type='email' placeholder='Email' onChange={ onUpdate } required/>\r\n          </div>\r\n          <Button type='submit'>Register</Button>\r\n          <Link to='/login'>Already have an account? Login</Link>\r\n        </FormGroup>\r\n      </MainBody>\r\n    </StyledRegister>\r\n  )\r\n}\r\n\r\nexport default Register\r\n","import { useEffect } from 'react'\r\nimport { Route, useHistory, Switch, Redirect } from 'react-router-dom'\r\nimport { ToastContainer } from 'react-toastify'\r\nimport { useAuthState, useAuthDispatch } from './providers/authProvider'\r\nimport { StyledApp } from './StyledApp'\r\n\r\nimport PrivateRoute from './components/PrivateRoute'\r\n\r\nimport Broadcast from './containers/Broadcast'\r\nimport Login from './containers/Login'\r\nimport Register from './containers/Register'\r\n\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n\r\nconst App = () => {\r\n  const { onClearErrors, onLoadUserData } = useAuthDispatch()\r\n  const { error, isLoggedIn, userData } = useAuthState()\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unlisten = history.listen(() => {\r\n      error && onClearErrors()\r\n    })\r\n\r\n    if (isLoggedIn && !userData) {\r\n      onLoadUserData()\r\n    }\r\n\r\n    return () => unlisten()\r\n  },[history, error, onClearErrors, isLoggedIn, userData, onLoadUserData ])\r\n\r\n  return (\r\n    <StyledApp>\r\n      <Switch>\r\n        <PrivateRoute exact path='/' redirectTo='/login'>\r\n          <Broadcast/>\r\n        </PrivateRoute>\r\n        <Route exact path='/login'>\r\n          { isLoggedIn ? <Redirect to='/'/> : <Login/> }\r\n        </Route>\r\n        <Route exact path='/register'>\r\n         { isLoggedIn ? <Redirect to='/'/> : <Register/> }\r\n        </Route>\r\n      </Switch>\r\n      <ToastContainer />\r\n    </StyledApp>\r\n  )\r\n}\r\n\r\nexport default App","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport { AuthProvider } from './providers/authProvider'\r\nimport { ChatProvider } from './providers/chatProvider'\r\n\r\nReactDOM.render(\r\n  <AuthProvider>\r\n    <ChatProvider>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </ChatProvider>\r\n  </AuthProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}